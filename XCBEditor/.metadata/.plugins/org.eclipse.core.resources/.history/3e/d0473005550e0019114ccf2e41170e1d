package XCBVisualEditor.XCBJson;

import java.io.FileNotFoundException;
import java.io.FileReader;

import com.google.gson.JsonIOException;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.google.gson.JsonSyntaxException;

public class SyncJsonReader {
	private String jsonpath;
	private JsonObject jsonfile,jsondata;
	public SyncJsonReader(String path) {
		this.jsonpath=path;
		JsonParser jp=new JsonParser();
		try {
			jsonfile=(JsonObject)jp.parse(new FileReader(jsonpath));
			jsondata=jsonfile.get("ServerInfo").getAsJsonObject();
		} catch (JsonIOException | JsonSyntaxException | FileNotFoundException e) {
		}
	}
	public String getServerAddress() {
		String address=null;
		if(jsondata!=null) {
			address=jsondata.get("ServerHostName").getAsString();
		}
		return address;
	}
	public int getServerPort() {
		int port=0;
		if(jsondata!=null) {
			port=jsondata.get("ServerPort").getAsInt();
		}
		return port;
	}
	public boolean getServerSync() {
		boolean sync=false;
		if(jsondata!=null) {
			sync=jsondata.get("SyncConfig").getAsBoolean();
		}
		return sync;
	}
	public int writeAddress(String address) {
		if(jsondata!=null) {
			jsondata.remove("ServerHostName");
		}
		return 1;
	}
}
